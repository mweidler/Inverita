% This file is part of INVERITA.
%
% INVERITA Personal Backup Software
% Copyright (C) 2012-2013  Marc Weidler <marc.weidler@web.de>,
%                          Ulrichstr. 12/1, 71672 Marbach, Germany.
%                          All rights reserved.
%
% INVERITA is free software: you can redistribute it and/or modify
% it under the terms of the GNU General Public License as published by
% the Free Software Foundation, either version 3 of the License, or
% (at your option) any later version.
%
% INVERITA is distributed in the hope that it will be useful,
% but WITHOUT ANY WARRANTY; without even the implied warranty of
% MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
% GNU General Public License for more details.
%
% You should have received a copy of the GNU General Public License
% along with this program.  If not, see <http://www.gnu.org/licenses/>.


%---------------------------------------
% Header/Footer text
%---------------------------------------
\newcommand{\headerinfo}{Please specify!}
\newcommand{\leftfooterinfo}{Please specify!}
\newcommand{\rightfooterinfo}{Please specify!}


%---------------------------------------
% Colors
%---------------------------------------
\definecolor{SectionBlue}{RGB}{0, 139, 221}


%---------------------------------------
% Listing
%---------------------------------------
\definecolor{cmtcolor}{rgb}{0,0.5,0}
\definecolor{nbrcolor}{rgb}{0.5,0.5,0.5}
\definecolor{keywordcolor}{rgb}{0.5,0,0.5}
\definecolor{consolebk}{RGB}{250,250,250}

\lstset{belowskip=-1.5\baselineskip}
\lstdefinestyle{script}
{ language=bash,
  backgroundcolor=\color{white},   % choose the background color; you must add \usepackage{color} or \usepackage{xcolor}
  basicstyle=\ttfamily\footnotesize,        % the size of the fonts that are used for the code
  breakatwhitespace=false,         % sets if automatic breaks should only happen at whitespace
  breaklines=true,                 % sets automatic line breaking
  captionpos=b,                    % sets the caption-position to bottom
  commentstyle=\color{cmtcolor},   % comment style
  deletekeywords={...},            % if you want to delete keywords from the given language
  escapeinside={\%*}{*)},          % if you want to add LaTeX within your code
  extendedchars=true,              % lets you use non-ASCII characters; for 8-bits encodings only, does not work with UTF-8
  frame=none,                      % adds a frame around the code
  keywordstyle=\color{keywordcolor},       % keyword style
  morekeywords={*,...},            % if you want to add more keywords to the set
  numbers=none,                    % where to put the line-numbers; possible values are (none, left, right)
  numbersep=5pt,                   % how far the line-numbers are from the code
  numberstyle=\tiny\color{nbrcolor},% the style that is used for the line-numbers
  rulecolor=\color{black},         % if not set, the frame-color may be changed on line-breaks within not-black text (e.g. comments (green here))
  showspaces=false,                % show spaces everywhere adding particular underscores; it overrides 'showstringspaces'
  showstringspaces=false,          % underline spaces within strings only
  showtabs=false,                  % show tabs within strings adding particular underscores
  stepnumber=2,                    % the step between two line-numbers. If it's 1, each line will be numbered
  stringstyle=\color{blue},        % string literal style
  tabsize=2,                       % sets default tabsize to 2 spaces
  title=\lstname,                  % show the filename of files included with \lstinputlisting; also try caption instead of title
%alsoletter={~$},
  literate={ยง}{{\bfseries{\$}}}1
%         {~}{{\bfseries{}}}1,
}

\lstdefinestyle{console}
{ language=bash,
  backgroundcolor=\color{consolebk},   % choose the background color; you must add \usepackage{color} or \usepackage{xcolor}
  basicstyle=\ttfamily\bfseries\small,        % the size of the fonts that are used for the code
  breakatwhitespace=false,         % sets if automatic breaks should only happen at whitespace
  breaklines=true,                 % sets automatic line breaking
  captionpos=b,                    % sets the caption-position to bottom
  commentstyle=\color{cmtcolor},   % comment style
  deletekeywords={...},            % if you want to delete keywords from the given language
  escapeinside={\%*}{*)},          % if you want to add LaTeX within your code
  extendedchars=true,              % lets you use non-ASCII characters; for 8-bits encodings only, does not work with UTF-8
  frame=none,                      % adds a frame around the code
  keywordstyle=\color{keywordcolor},       % keyword style
  morekeywords={inverita},            % if you want to add more keywords to the set
  numbers=none,                    % where to put the line-numbers; possible values are (none, left, right)
  numbersep=5pt,                   % how far the line-numbers are from the code
  numberstyle=\tiny\color{nbrcolor},% the style that is used for the line-numbers
  rulecolor=\color{SectionBlue},         % if not set, the frame-color may be changed on line-breaks within not-black text (e.g. comments (green here))
  showspaces=false,                % show spaces everywhere adding particular underscores; it overrides 'showstringspaces'
  showstringspaces=false,          % underline spaces within strings only
  showtabs=false,                  % show tabs within strings adding particular underscores
  stepnumber=2,                    % the step between two line-numbers. If it's 1, each line will be numbered
  stringstyle=\color{blue},        % string literal style
  tabsize=2,                       % sets default tabsize to 2 spaces
  title=\lstname,                  % show the filename of files included with \lstinputlisting; also try caption instead of title
%alsoletter={~$},
  literate={ยง}{{\bfseries{\$}}}1
%         {~}{{\bfseries{}}}1,
}


%---------------------------------------
% Heading format
%---------------------------------------
\titleformat{\chapter}[display]
{\bfseries\Large}
{\filleft\MakeUppercase{\chaptertitlename}\hspace{1ex}\Huge\thechapter}
{4ex}
{\titlerule
\vspace{2ex}%
\filright\Huge}
[\vspace{0.75ex}%
\titlerule]

\titleformat{\section}
{\color{SectionBlue}\normalfont\Large\bfseries}
{\color{SectionBlue}\thesection}{1em}{}

\titleformat{\subsection}
{\color{SectionBlue}\normalfont\large}
{\color{SectionBlue}\thesubsection}{1em}{}

\titleformat{\subsubsection}
{\color{SectionBlue}\normalfont}
{\color{SectionBlue}\thesubsubsection}{1em}{}


%---------------------------------------
% Format commands
%---------------------------------------
\newcommand{\topic}[1]{\normalfont{\bfseries\color{SectionBlue}#1}\newline}
\newcommand{\monospace}[1]{\texttt{#1}}


%---------------------------------------
% Change figure numbering to 1,2,3,...
%---------------------------------------
\newcounter{myfigure}
\renewcommand{\thefigure}{\arabic{myfigure}}
\newcommand{\figurecaption}[1]{\stepcounter{myfigure}\caption{#1}}

\newcounter{myequation}
\renewcommand{\theequation}{\arabic{myequation}}


%---------------------------------------
% attributes
%---------------------------------------
\newlength{\Myentrydefaultwidth}
\setlength{\Myentrydefaultwidth}{40pt}
\newenvironment{entry}
               {\list{}{%
                    \setlength{\labelsep}{0cm}
                    \setlength{\labelwidth}{\Myentrydefaultwidth}%
                    \setlength{\leftmargin}{\labelwidth}
                    \let\makelabel\entrylabel}}
               {\endlist}
\newcommand{\entrylabel}[1]{\mbox{\textbf{#1}}\hfil}

\newlength{\Myattributelen}
\newcommand{\attributelabel}[1]{%
  \settowidth{\Myattributelen}{\texttt{#1}X}%
  \ifthenelse{\lengthtest{\Myattributelen > \labelwidth}}%
      {\parbox[b]{\labelwidth}%
        {\makebox[0pt][l]{\texttt{#1}}\\}}%
      {\texttt{#1}}%
  \hfil\relax}
\newenvironment{attributes}[1][40pt]
  {\renewcommand{\entrylabel}{\attributelabel}\setlength{\Myentrydefaultwidth}{#1}
    \begin{entry}}
    {\end{entry}}


%---------------------------------------
% includegraphic
%---------------------------------------
\def\gfxwidth{\ifdim0.75\Gin@nat@width>\linewidth\linewidth\else0.75\Gin@nat@width\fi}
\newcommand*{\includegraphic}[4][1]{%
          \begin{figure}[htb]
          \begin{center}
          \includegraphics[width=\gfxwidth*\real{#1},keepaspectratio]{#2}
          \figurecaption{#3}
          \label{fig:#4}
          \end{center}
          \end{figure}
          \FloatBarrier
	  }


%---------------------------------------
% formula
%---------------------------------------
%\newenvironment{formula}[1]
%  {\stepcounter{myequation}\begin{equation}\label{eq:#1}}
%  {\end{equation}\ignorespacesafterend}


%---------------------------------------
% listing
%--------------------------------------
%\newcommand{\listingcmd}{\renewcommand{\FancyVerbFormatLine}[1]{\parbox{\dimexpr\linewidth-2\fboxsep\relax}{##1}}}
%\DefineVerbatimEnvironment{listing}{Verbatim}
%{frame=single, numbers=left, fontsize=\footnotesize, formatcom=\listingcmd}


%---------------------------------------
% reference, eqreference
%---------------------------------------
\newcommand{\reference}[1]{Figure \ref{fig:#1}}
%\newcommand{\eqreference}[1]{Formula (\ref{eq:#1})}


%---------------------------------------
% enum
%---------------------------------------
\newenvironment{enum}
               {\begin{enumerate}[1.]}
               {\end{enumerate}}


%---------------------------------------
% Eye catchers
%---------------------------------------
\newlength{\MyAttentionLen}
\newenvironment{info}
               {
                \vspace{2ex}
                \raisebox{\dimexpr\ht\strutbox-1.05\height}{\includegraphics[width=30pt]{images/info-icon.pdf}\hspace{0.75em}}
                \begin{minipage}[t]{\linewidth-40pt}\begin{itshape}
               }
               {
                \end{itshape}\end{minipage}\vspace{2ex}
               }

\newenvironment{warning}
               {
                \vspace{2ex}
                \raisebox{\dimexpr\ht\strutbox-1.05\height}{\includegraphics[width=30pt]{images/warning-icon.pdf}\hspace{0.75em}}
                \begin{minipage}[t]{\linewidth-40pt}\begin{bfseries}
               }
               {
                \end{bfseries}\end{minipage}\vspace{2ex}
               }


%---------------------------------------
% console
%--------------------------------------
\definecolor{consolecolor}{rgb}{0.95,0.95,0.95}
\newcommand{\consolecmd}{\renewcommand{\FancyVerbFormatLine}[1]{\colorbox{consolecolor}{\parbox{\dimexpr\linewidth-2\fboxsep\relax}{##1}}}}
\DefineVerbatimEnvironment{console}{Verbatim}
{showspaces=false, framesep=0mm, fontsize=\small, fontfamily=courier, fontseries=b, formatcom=\consolecmd}


%---------------------------------------
% Set heading and footers
%---------------------------------------
\pagestyle{fancy}
\renewcommand{\sectionmark}[1]{\markboth{#1}{}}
\lhead[\headerinfo]{\bfseries\leftmark}
\chead[]{}
\rhead[\bfseries\leftmark]{\headerinfo}
\lfoot[\bfseries\thepage]{\leftfooterinfo}
\cfoot[]{}
\rfoot[\rightfooterinfo]{\bfseries\thepage}


%---------------------------------------
% Let the fancy heading/footing be on EVERY page
%---------------------------------------
\makeatletter
\let\ps@plain\ps@fancy
\makeatother

